<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Survival Analysis — Sur_ana • ISRverse</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Survival Analysis — Sur_ana"><meta property="og:description" content="Run basta Models on the data after checking conditions for correct convergence of the Models"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ISRverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data-selection.html">Data Selection</a>
    </li>
    <li>
      <a href="../articles/growth.html">Growth</a>
    </li>
    <li>
      <a href="../articles/reproduction.html">Reproduction</a>
    </li>
    <li>
      <a href="../articles/survival.html">Survival</a>
    </li>
    <li>
      <a href="../articles/taxon-profiles.html">Taxon profiles</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Survival Analysis</h1>

    <div class="hidden name"><code>Sur_ana.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Run basta Models on the data after checking conditions for correct convergence of the Models</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Sur_ana</span><span class="op">(</span></span>
<span>  <span class="va">Data</span>,</span>
<span>  <span class="va">DeathInformation</span>,</span>
<span>  CalculateMetricsFrom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Raw"</span>, <span class="st">"Kaplan-Meier"</span>, <span class="st">"Model"</span><span class="op">)</span>,</span>
<span>  Models <span class="op">=</span> <span class="st">"GO"</span>,</span>
<span>  Shape <span class="op">=</span> <span class="st">"simple"</span>,</span>
<span>  MinAge <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  OutlLev1 <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  MinDate <span class="op">=</span> <span class="st">"1980-01-01"</span>,</span>
<span>  MinNSur <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  MaxNSur <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  UncertDeath <span class="op">=</span> <span class="fl">365</span>,</span>
<span>  MinLx <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  MinBirthKnown <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  MinInstitution <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  AgeMat <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  LastDead <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  niter <span class="op">=</span> <span class="fl">25000</span>,</span>
<span>  burnin <span class="op">=</span> <span class="fl">5001</span>,</span>
<span>  thinning <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  nchain <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ncpus <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">Data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code>data.frame</code> including at least the following columns <em>AnimalAnonID</em>, <em>BirthDate</em>, <em>DepartDate</em>, <em>EntryDate</em>, <em>MaxBirthDate</em>, <em>MinBirthDate</em>, <em>EntryType</em>, <em>DepartType</em>, <em>FirstHoldingInstitution</em>, <em>LastHoldingInstitution</em>, <em>SexType</em>, and <em>BirthType</em>.</p></dd>


<dt id="arg-deathinformation">DeathInformation<a class="anchor" aria-label="anchor" href="#arg-deathinformation"></a></dt>
<dd><p><code>data.frame</code> including at least the following columns <em>AnimalAnonID</em> and <em>RelevantDeathInformationType</em></p></dd>


<dt id="arg-calculatemetricsfrom">CalculateMetricsFrom<a class="anchor" aria-label="anchor" href="#arg-calculatemetricsfrom"></a></dt>
<dd><p><code>vector of characters</code> indicates which metrics should be calculated from which data: "Raw", "Kaplan-Meier", "Model".</p></dd>


<dt id="arg-models">Models<a class="anchor" aria-label="anchor" href="#arg-models"></a></dt>
<dd><p><code>vector of characters</code> names of the basta models to run: "G0", "EX", "LO" and/or "WE". see ?basta for more information.</p></dd>


<dt id="arg-shape">Shape<a class="anchor" aria-label="anchor" href="#arg-shape"></a></dt>
<dd><p><code>character</code> Shape of the basta model: "simple", "Makeham", "bathtub".  see ?basta for more information.</p></dd>


<dt id="arg-minage">MinAge<a class="anchor" aria-label="anchor" href="#arg-minage"></a></dt>
<dd><p><code>numeric</code> Ages at which the survival analysis should start, in years.  see ?basta for more information.</p></dd>


<dt id="arg-outllev-">OutlLev1<a class="anchor" aria-label="anchor" href="#arg-outllev-"></a></dt>
<dd><p><code>numeric</code> Start threshold to select individuals based on the longevity distribution: 100%, 99.9, 99 or 95%. This number must decrease when many errors are expected in longevity data.</p></dd>


<dt id="arg-mindate">MinDate<a class="anchor" aria-label="anchor" href="#arg-mindate"></a></dt>
<dd><p><code>character 'YYYY-MM-DD'</code> Earlier date to include data.</p></dd>


<dt id="arg-minnsur">MinNSur<a class="anchor" aria-label="anchor" href="#arg-minnsur"></a></dt>
<dd><p><code>numeric</code> Minimum number of individual records needed to run the survival analysis.</p></dd>


<dt id="arg-maxnsur">MaxNSur<a class="anchor" aria-label="anchor" href="#arg-maxnsur"></a></dt>
<dd><p><code>numeric</code> Maximum number of individual records to run the survival analysis.</p></dd>


<dt id="arg-uncertdeath">UncertDeath<a class="anchor" aria-label="anchor" href="#arg-uncertdeath"></a></dt>
<dd><p><code>numeric</code>: Maximum uncertainty accepted for death date, in days.</p></dd>


<dt id="arg-minlx">MinLx<a class="anchor" aria-label="anchor" href="#arg-minlx"></a></dt>
<dd><p><code>numeric</code> Value used for longevity threshold and for checks. between 0 and 1. Minimum reached survivorship from the raw Kaplan Meier analysis. This number avoids running survival analysis if there are too few dead individuals in the data. Lower is better.</p></dd>


<dt id="arg-minbirthknown">MinBirthKnown<a class="anchor" aria-label="anchor" href="#arg-minbirthknown"></a></dt>
<dd><p><code>numeric</code> between 0 and 1. Minimum proportion of individuals with a known birth month in the data to run the survival analysis.</p></dd>


<dt id="arg-mininstitution">MinInstitution<a class="anchor" aria-label="anchor" href="#arg-mininstitution"></a></dt>
<dd><p><code>numeric</code> Minimum number of institutions that should hold records to run the survival analysis.</p></dd>


<dt id="arg-agemat">AgeMat<a class="anchor" aria-label="anchor" href="#arg-agemat"></a></dt>
<dd><p><code>numeric</code> Age at sexual maturity, in years. If given, key survival metrics are calculated both from birth and from age at sexual maturity.</p></dd>


<dt id="arg-lastdead">LastDead<a class="anchor" aria-label="anchor" href="#arg-lastdead"></a></dt>
<dd><p><code>logical</code> Whether the longest lived individuals should be considered dead.</p></dd>


<dt id="arg-niter">niter<a class="anchor" aria-label="anchor" href="#arg-niter"></a></dt>
<dd><p><code>numeric</code>. Parameter to run the model: number of MCMC iterations. see ?basta for more information.</p></dd>


<dt id="arg-burnin">burnin<a class="anchor" aria-label="anchor" href="#arg-burnin"></a></dt>
<dd><p><code>numeric</code> Parameter to run the model: number of iterations removed so that the model has time to converge. see ?basta for more information.</p></dd>


<dt id="arg-thinning">thinning<a class="anchor" aria-label="anchor" href="#arg-thinning"></a></dt>
<dd><p><code>numeric</code> Parameter to run the model: number of iterations to run before saving a set of parameters. see ?basta for more information.</p></dd>


<dt id="arg-nchain">nchain<a class="anchor" aria-label="anchor" href="#arg-nchain"></a></dt>
<dd><p><code>numeric</code> Parameter to run the model: Number of chains to run.</p></dd>


<dt id="arg-ncpus">ncpus<a class="anchor" aria-label="anchor" href="#arg-ncpus"></a></dt>
<dd><p><code>numeric</code> Number of computer cores to use.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The output of a list including (depending of CalculateMetricsFrom) per sex categories:</p><ul><li><p>a summary of the data used:</p><ul><li><p>NSelect: Number of individuals selected from filters</p></li>
<li><p>NUncertdeath: Number of individuals selected after filter uncertainty in death</p></li>
<li><p>NBasta: Number of data (individuals) selected for the BaSTA/survival analysis</p></li>
<li><p>Ndead:Number of selected individuals with known age of death used in the BaSTA/survival analysis</p></li>
<li><p>Nrc: Number of selected right censored individuals</p></li>
<li><p>N8090: Number of selected individuals born between 1980 and 1990 (excluded)</p></li>
<li><p>N9000: Number of selected individuals born between 1990 and 2000 (excluded)</p></li>
<li><p>N0010: Number of selected individuals born between 2000 and 2010 (excluded)</p></li>
<li><p>N1020: Number of selected individuals born between 2010 and 2020 (excluded)</p></li>
<li><p>N2030: Number of selected individuals born between 2020 and 2030 (excluded)</p></li>
<li><p>QBD10: 10% Quantile of birth date distribution among selected individuals</p></li>
<li><p>QBD50: Median of birth date distribution among selected individuals</p></li>
<li><p>QBD90: 90% Quantile of birth date distribution among selected individuals</p></li>
<li><p>BDincert: average uncertainty in birth date: in days among selected individuals</p></li>
<li><p>maxAge: Maximum age of selected known age individuals</p></li>
<li><p>maxAlive:Maximum number of years spent ex situ among selected individuals</p></li>
<li><p>lxMin: Minimum survivorship reached with the raw Kaplan-Meier model</p></li>
<li><p>OutLev: threshold selected for the distribution of longevity: 100%, 99.9%, 99% or 95%</p></li>
<li><p>analyzed: a logical indicated if the basta survival model was performed</p></li>
<li><p>If the basta survival model was not performed, an error and its number (Nerr) are returned: The possibility for  this functions are: 2/Nuncertdeath &lt; MinNSur; 3/ lxMin &gt;0.99; 4/NBasta = 0; 5/ %known births &lt; MinBirthKnown; 6/Data from 1 Institution; 7/Nbasta &lt; MinNSur; 8/Nbasta &gt; MaxNSur; 9/no DIC from Basta; 10/Gof martingale does not fit; 11/Kaplan-Meier does not fit; 12/Min(Life_exp) &gt;= MaxLE; 13/lx_MLE &lt; MinMLE; 14/lxmin &gt; MinLx; 15/Kaplan-Meier does not fit:2.</p></li>
</ul></li>
<li><p>the Kaplan-Meier table</p></li>
<li><p>Key survival metrics including Mean life expectancy (MLE &amp; Ex), median life expectancy (L50) and  age at which 90% of the individual died (Longevity = L90) estimated from raw data and from the Kaplan Meier Estimator. Estimates include ages from birth or from age at sexual maturity (if given). First year survival, First month survival, Entropy (H and Epx = -log(H)), coefficient of variation (CV) and Gini coefficient (G) are also estimated from the Kaplan-Meier estimator.</p></li>
<li><p>the basta fit of the best model</p></li>
<li><p>the DIC table comparing the different fit of the Models</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">core</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">deathinformation</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">Sur_ana</span><span class="op">(</span><span class="va">core</span>,  DeathInformation <span class="op">=</span> <span class="va">deathinformation</span>, Models <span class="op">=</span> <span class="st">"GO"</span>, Shape <span class="op">=</span> <span class="st">"simple"</span>,</span></span>
<span class="r-in"><span>               niter <span class="op">=</span> <span class="fl">1000</span>, burnin <span class="op">=</span> <span class="fl">101</span>, thinning <span class="op">=</span> <span class="fl">10</span>, nchain <span class="op">=</span> <span class="fl">3</span>, ncpus <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "GO"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running sequence to find jump SDs... Done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total jump SDs computing time: 11.63 secs.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple simulations started...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Unknown option on commandline: --file</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> R Version:  R version 4.5.0 (2025-04-11) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> snowfall 1.84-6.3 initialized (using snow 0.4-4): parallel execution on 3 CPUs.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Library BaSTA loaded.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Library BaSTA loaded in cluster.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Stopping cluster</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simulations finished.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total MCMC computing time: 6.00 secs.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Calculating summary statistics... Done.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> All parameters converged properly.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constructing life table... done.</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Floriane Plard.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

      </footer></div>






  </body></html>

